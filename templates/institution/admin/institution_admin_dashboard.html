{% extends "layouts/base.html" %}
{% block title %}Admin Dashboard - AttendAI{% endblock %}

{% block content %}
<div class="dashboard-admin">
    <h1 class="page-title">Admin Dashboard</h1>

    <div class="dashboard-grid">

        <!-- LEFT -->
        <div class="left-column">

            <div class="card-custom">
                <div class="card-header-custom">Institution</div>
                <div class="card-body-custom">
                    <div class="profile-info">
                        <p><span>Name</span>{{ institution.name }}</p>
                        {% if institution.is_active %}
                        <p><span>Status</span><span class="badge success">Active</span></p>
                        {% else %}
                        <p><span>Status</span><span class="badge danger">Inactive</span></p>
                        {% endif %}
                        <p><span>Renewal</span>{{ institution.renewal.strftime('%d %b %Y') }}</p>
                    </div>
                    <a class="btn-custom btn-outline" a href="{{ url_for('institution.institution_profile') }}">Manage Institution</a>
                </div>
            </div>

            <div class="card-custom">
                <div class="card-header-custom">Quick Actions</div>
                <div class="card-body-custom quick-actions">
                    <a href="{{ url_for('institution.manage_users') }}" class="action-btn">üë§ Manage Users</a>
                    <a href="{{ url_for('institution.manage_attendance') }}" class="action-btn">üìä Attendance</a>
                    <a href="{{ url_for('institution.manage_classes') }}" class="action-btn">üè´ Classes</a>
                    <a href="{{ url_for('institution.institution_profile') }}" class="action-btn">‚öô Institution Profile</a>
                    <a href="{{ url_for('institution.import_data') }}" class="action-btn">üì• Import Data</a>
                </div>
            </div>
        </div>

        <!-- MIDDLE -->
        <div class="card-custom">
            <div class="card-header-custom">User Overview</div>
            <div class="card-body-custom">
                <div class="stats-main">
                    <div class="stat-big">
                        <span>Total Users</span>
                        <strong>{{ overview.user_count }}</strong>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat"><span>Admins</span>{{ overview.admin_count }}</div>
                    <div class="stat"><span>Lecturers</span>{{ overview.lecturer_count }}</div>
                    <div class="stat"><span>Students</span>{{ overview.student_count }}</div>
                </div>
            </div>
        </div>

        <!-- RIGHT -->
        <div class="card-custom">
            <div class="card-header-custom">Classes Today</div>
            <div class="card-body-custom">

                {% for c in classes %}
                <div class="class-item">
                    <div class="class-info">
                        <p><strong>Module: </strong>{{c.module}}</p>
                        <p><strong>Venue: </strong>{{c.venue}}</p>
                        <p><strong>Lecturer: </strong>{{c.lecturer}}</p>
                    </div>
                    <button class="btn-pill">View</button>
                </div>
                {% endfor %}

            </div>
        </div>

    </div>
</div>


<style>
    .dashboard-admin {
    max-width: 1400px;
    margin: auto;
}

.page-title {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1.2fr 1.3fr;
    gap: 1.5rem;
}

.card-custom {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 8px 24px rgba(0,0,0,.06);
}

.card-header-custom {
    padding: 1rem 1.25rem;
    font-weight: 600;
    border-bottom: 1px solid #eee;
}

.card-body-custom {
    padding: 1.25rem;
}

.profile-info p {
    display: flex;
    justify-content: space-between;
    font-size: .9rem;
    margin-bottom: .5rem;
}

.profile-info span:first-child {
    font-weight: 600;
    color: #64748b;
}

.badge.success {
    background: #dcfce7;
    color: #166534;
    padding: .15rem .6rem;
    border-radius: 999px;
    font-size: .75rem;
}

.quick-actions {
    display: grid;
    gap: .6rem;
}

.action-btn {
    padding: .75rem;
    border-radius: 10px;
    background: #f8fafc;
    font-size: .9rem;
    transition: .2s;
}

.action-btn:hover {
    background: #e2e8f0;
}

.stats-main {
    text-align: center;
    margin-bottom: 1rem;
}

.stat-big strong {
    font-size: 2.4rem;
    display: block;
}

.stats-row {
    display: flex;
    justify-content: space-between;
    gap: .75rem;
}

.stat {
    background: #f8fafc;
    padding: .75rem;
    border-radius: 10px;
    flex: 1;
    text-align: center;
    font-size: .85rem;
}

.stat span {
    display: block;
    font-size: .75rem;
    color: #64748b;
}

.class-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: .75rem;
    border-radius: 10px;
    background: #f8fafc;
    margin-bottom: .6rem;
}

.class-info p {
    margin: 0;
    font-size: .8rem;
}

.btn-pill {
    padding: .3rem 1rem;
    border-radius: 999px;
    font-size: .75rem;
    background: #0f172a;
    color: #fff;
    border: none;
}

@media (max-width: 1024px) {
    .dashboard-grid { grid-template-columns: 1fr 1fr; }
}

@media (max-width: 768px) {
    .dashboard-grid { grid-template-columns: 1fr; }
}
</style>
{% endblock %}