{% extends "layouts/base.html" %}
{% block title %}Admin Dashboard - AttendAI{% endblock %}

{% block content %}
<div class="dashboard-admin">
    <h1 class="page-title">Admin Dashboard</h1>

    <div class="dashboard-grid">

        <!-- LEFT -->
        <div class="left-column">

            <div class="card-custom">
                <div class="card-header-custom">Institution</div>
                <div class="card-body-custom">
                    <div class="profile-info">
                        <p><span>Name</span>{{ institution.name }}</p>
                        {% if institution.is_active %}
                        <p><span>Status</span><span class="badge success">Active</span></p>
                        {% else %}
                        <p><span>Status</span><span class="badge danger">Inactive</span></p>
                        {% endif %}
                        <p><span>Renewal</span>{{ institution.renewal.strftime('%d %b %Y') }}</p>
                    </div>
                    <a class="btn-custom btn-outline" a href="{{ url_for('institution.institution_profile') }}">Manage Institution</a>
                </div>
            </div>

            <div class="card-custom">
                <div class="card-header-custom">Quick Actions</div>
                <div class="card-body-custom quick-actions">
                    <a href="{{ url_for('institution.manage_users') }}" class="action-btn">üë§ Manage Users</a>
                    <a href="{{ url_for('institution.manage_attendance') }}" class="action-btn">üìä Attendance</a>
                    <a href="{{ url_for('institution.manage_classes') }}" class="action-btn">üè´ Classes</a>
                    <a href="{{ url_for('institution.institution_profile') }}" class="action-btn">‚öô Institution Profile</a>
                    <a href="{{ url_for('institution.import_data') }}" class="action-btn">üì• Import Data</a>
                </div>
            </div>
        </div>

        <!-- MIDDLE -->
        <div class="card-custom">
            <div class="card-header-custom">User Overview</div>
            <div class="card-body-custom">
                <div class="stats-main">
                    <div class="stat-big">
                        <span>Total Users</span>
                        <strong>{{ overview.user_count }}</strong>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat"><span>Admins</span>{{ overview.admin_count }}</div>
                    <div class="stat"><span>Lecturers</span>{{ overview.lecturer_count }}</div>
                    <div class="stat"><span>Students</span>{{ overview.student_count }}</div>
                </div>
            </div>
        </div>

        <!-- RIGHT -->
        <div class="card-custom">
            <div class="card-header-custom">Classes Today</div>
            <div class="card-body-custom">

                {% for c in classes %}
                <div class="class-item">
                    <div class="class-info">
                        <p><strong>Module: </strong>{{c.module}}</p>
                        <p><strong>Venue: </strong>{{c.venue}}</p>
                        <p><strong>Lecturer: </strong>{{c.lecturer}}</p>
                    </div>
                    <a href="{{ url_for('institution.attendance_class_details', class_id=c.id) }}" class="btn-pill">Manage Class</a>
                </div>
                {% endfor %}

            </div>
        </div>

    </div>
</div>


<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

    .dashboard-admin {
        max-width: 1400px;
        margin: auto;
        padding: 20px;
        font-family: 'Montserrat', sans-serif;
    }

    .page-title {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: #001641;
        font-family: 'Montserrat', sans-serif;
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1.2fr 1.3fr;
        gap: 1.5rem;
    }

    .left-column {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .card-custom {
        background: #FFFFFF;
        border-radius: 12px;
        border: 2px solid #001641;
        overflow: hidden;
    }

    .card-header-custom {
        padding: 1rem 1.25rem;
        font-weight: 700;
        font-size: 1.1rem;
        background: #001641;
        color: #FFFFFF;
        border-bottom: 2px solid #001641;
        font-family: 'Montserrat', sans-serif;
    }

    .card-body-custom {
        padding: 1.25rem;
        background: #f8fafc;
    }

    .profile-info p {
        display: flex;
        justify-content: space-between;
        font-size: .95rem;
        margin-bottom: .75rem;
        font-family: 'Montserrat', sans-serif;
        color: #001641;
    }

    .profile-info span:first-child {
        font-weight: 600;
        color: #001641;
    }

    .badge {
        padding: .25rem .75rem;
        border-radius: 6px;
        font-size: .75rem;
        font-weight: 600;
        font-family: 'Montserrat', sans-serif;
    }

    .badge.success {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #166534;
    }

    .badge.danger {
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #991b1b;
    }

    .btn-custom {
        display: inline-block;
        padding: .625rem 1.25rem;
        font-size: .9rem;
        font-weight: 600;
        text-align: center;
        text-decoration: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-family: 'Montserrat', sans-serif;
        margin-top: 1rem;
    }

    .btn-outline {
        background: transparent;
        border: 2px solid #001641;
        color: #001641;
    }

    .btn-outline:hover {
        background: #001641;
        color: #FFFFFF;
        transform: translateY(-1px);
    }

    .quick-actions {
        display: grid;
        gap: .75rem;
    }

    .action-btn {
        padding: .875rem 1rem;
        border-radius: 8px;
        background: #FFFFFF;
        border: 2px solid #001641;
        font-size: .9rem;
        font-weight: 600;
        transition: all .2s;
        color: #001641;
        text-decoration: none;
        font-family: 'Montserrat', sans-serif;
        display: block;
    }

    .action-btn:hover {
        background: #001641;
        color: #FFFFFF;
        transform: translateX(4px);
    }

    .stats-main {
        text-align: center;
        margin-bottom: 1.5rem;
        padding: 1.5rem;
        background: #001641;
        border-radius: 8px;
    }

    .stat-big {
        color: #FFFFFF;
    }

    .stat-big span {
        font-size: .9rem;
        display: block;
        margin-bottom: .5rem;
        font-weight: 600;
        font-family: 'Montserrat', sans-serif;
    }

    .stat-big strong {
        font-size: 3rem;
        display: block;
        font-weight: 700;
        font-family: 'Montserrat', sans-serif;
    }

    .stats-row {
        display: flex;
        justify-content: space-between;
        gap: .75rem;
    }

    .stat {
        background: #FFFFFF;
        border: 2px solid #001641;
        padding: 1rem;
        border-radius: 8px;
        flex: 1;
        text-align: center;
        font-size: 1.5rem;
        font-weight: 700;
        color: #001641;
        font-family: 'Montserrat', sans-serif;
    }

    .stat span {
        display: block;
        font-size: .8rem;
        color: #001641;
        margin-bottom: .5rem;
        font-weight: 600;
        font-family: 'Montserrat', sans-serif;
    }

    .class-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border-radius: 8px;
        background: #FFFFFF;
        border: 2px solid #001641;
        margin-bottom: .75rem;
    }

    .class-info p {
        margin: .25rem 0;
        font-size: .85rem;
        color: #001641;
        font-family: 'Montserrat', sans-serif;
    }

    .class-info strong {
        font-weight: 600;
        color: #001641;
    }

    .btn-pill {
        padding: .5rem 1.25rem;
        border-radius: 6px;
        font-size: .8rem;
        background: #001641;
        color: #FFFFFF;
        border: 2px solid #001641;
        font-weight: 600;
        text-decoration: none;
        font-family: 'Montserrat', sans-serif;
        transition: all .2s;
    }

    .btn-pill:hover {
        background: #FFFFFF;
        color: #001641;
        transform: scale(1.05);
    }

    @media (max-width: 1024px) {
        .dashboard-grid { 
            grid-template-columns: 1fr 1fr; 
        }
        .left-column {
            grid-column: 1 / -1;
            flex-direction: row;
        }
    }

    @media (max-width: 768px) {
        .dashboard-grid { 
            grid-template-columns: 1fr; 
        }
        .left-column {
            flex-direction: column;
        }
        .dashboard-admin {
            padding: 10px;
        }
    }
</style>
{% endblock %}